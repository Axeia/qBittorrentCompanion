
<UserControl 
	xmlns="https://github.com/avaloniaui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
	x:Class="qBittorrentCompanion.Views.LocalSettings.NotificationsView"
	xmlns:ic="using:FluentIcons.Avalonia" 
	xmlns:vm="using:qBittorrentCompanion.ViewModels"
	xmlns:notification="clr-namespace:Avalonia.Notification.Controls;assembly=Notification.Avalonia"
	xmlns:vmls="using:qBittorrentCompanion.ViewModels.LocalSettings"
	xmlns:vls="clr-namespace:qBittorrentCompanion.Views.LocalSettings"
	xmlns:service="clr-namespace:qBittorrentCompanion.Services"
	xmlns:lang="clr-namespace:qBittorrentCompanion.Resources"
	x:DataType="vmls:NotificationsViewModel">
	<UserControl.Styles>
		<StyleInclude Source="/Styles/PreferencesStyles.axaml"/>
	</UserControl.Styles>
	<Grid RowDefinitions="* auto">
		<StackPanel Grid.Row="0" Grid.IsSharedSizeScope="True" Margin="18 18 18 0">
			<StackPanel.Styles>
				<Style Selector="notification|NotificationMessageContainer">
					<Setter Property="Margin" Value="8,0"/>
				</Style>
			</StackPanel.Styles>
			<Border Classes="SectionTop">
				<StackPanel Margin="16 8 8 8">
					<Grid ColumnDefinitions="auto * auto">
						<ic:SymbolIcon Symbol="Alert" Grid.Column="0" Margin="0 -4 4 0" VerticalAlignment="Center"/>
						<TextBlock Grid.Column="1" Classes="SectionTitleMain" Text="{x:Static lang:Resources.NotificationsView_Notifications}"/>
						<ToggleSwitch 
							Grid.Column="2" 
							OnContent="{x:Static lang:Resources.NotificationsView_SuspendNativeNotifications}" 
							OffContent="{x:Static lang:Resources.NotificationsView_SuspendNativeNotifications}"
							x:DataType="service:NotificationService"
							IsChecked="{Binding Source={x:Static service:NotificationService.Instance}, Path=NotificationNativeSuspended, Mode=TwoWay}">
							<ToolTip.Tip>
								<StackPanel Spacing="4">
									<TextBlock Text="{x:Static lang:Resources.NotificationsView_SuspendNativeNotifications1}"/>
									<TextBlock Text="{x:Static lang:Resources.NotificationsView_SuspendNativeNotifications2}"/>
								</StackPanel>
							</ToolTip.Tip>
						</ToggleSwitch>
					</Grid>
					<TextBlock Classes="SectionTitleDescription" Text="{x:Static lang:Resources.NotificationsView_ShowNotificationOnEvent}"/>

				</StackPanel>
			</Border>

			<Border Classes="SectionBottom" Margin="0" CornerRadius="0">
				<Grid HorizontalAlignment="Stretch">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition SharedSizeGroup="A" Width="auto" />
						<ColumnDefinition SharedSizeGroup="N" Width="auto" />
					</Grid.ColumnDefinitions>
					<DockPanel Grid.Column="0" HorizontalSpacing="8" Opacity="0.4">
						<ic:SymbolIcon Symbol="Info" VerticalAlignment="Center"/>
						<TextBlock TextWrapping="Wrap" FontSize="14" HorizontalAlignment="Left" Classes="FakeLabel" Text="{x:Static lang:Resources.NotificationsView_IfBothOptionsAreEnabled}"/>
					</DockPanel>
					<StackPanel Grid.Column="1" Spacing="4">
						<TextBlock Text="{x:Static lang:Resources.NotificationsView_InApp}" Margin="4 0" HorizontalAlignment="Center"/>
						<Button Content="{x:Static lang:Resources.NotificationsView_Test}" Command="{Binding ShowTestNotificationCommand}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center"/>
					</StackPanel>
					<StackPanel Grid.Column="2" Spacing="4">
						<TextBlock Text="{x:Static lang:Resources.NotificationsView_Native}" Margin="4 0" HorizontalAlignment="Center"/>
						<Button Grid.Column="2" Click="TestNotification_Click" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" Content="{x:Static lang:Resources.NotificationsView_Test}"/>
					</StackPanel>
				</Grid>
			</Border>

			<Border Classes="SectionBottom" Padding="16 0 16 8" Margin="0" BorderThickness="1 0 1 1" HorizontalAlignment="Stretch">
				<ScrollViewer>
					<StackPanel HorizontalAlignment="Stretch" Margin="0 16 0 0">
						<StackPanel.Styles>
							<Style Selector="Grid TextBlock:nth-child(1n+2)">
								<Setter Property="Padding" Value="4 0"/>
							</Style>
							<Style Selector="ToggleSwitch">
								<Setter Property="Margin" Value="8 0"/>
							</Style>
						</StackPanel.Styles>

						<Grid HorizontalAlignment="Stretch" ToolTip.Tip="{x:Static lang:Resources.NotificationsView_TorrentAddedDelay}">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition SharedSizeGroup="A" Width="auto" />
								<ColumnDefinition SharedSizeGroup="N" Width="auto" />
							</Grid.ColumnDefinitions>
							<TextBlock Grid.Column="0" Text="{x:Static lang:Resources.NotificationsView_TorrentAdded}"/>
							<ToggleSwitch 
								Grid.Column="1" 
								IsChecked="{Binding Source={x:Static service:NotificationService.Instance}, Path=NotificationInAppTorrentAdded, Mode=TwoWay}"/>
							<ToggleSwitch 
								Grid.Column="2" 
								IsChecked="{Binding Source={x:Static service:NotificationService.Instance}, Path=NotificationNativeTorrentAdded, Mode=TwoWay}"/>
						</Grid>

						<Grid HorizontalAlignment="Stretch" ToolTip.Tip="{x:Static lang:Resources.NotificationsView_FinishedDownloadCondition}">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition SharedSizeGroup="A" Width="auto" />
								<ColumnDefinition SharedSizeGroup="N" Width="auto" />
							</Grid.ColumnDefinitions>
							<TextBlock Grid.Column="0" Text="{x:Static lang:Resources.NotificationsView_FinishedDownload}"/>
							<ToggleSwitch 
								Grid.Column="1" 
								IsChecked="{Binding Source={x:Static service:NotificationService.Instance}, Path=NotificationInAppDownloadCompleted, Mode=TwoWay}"/>
							<ToggleSwitch 
								Grid.Column="2" 
								IsChecked="{Binding Source={x:Static service:NotificationService.Instance}, Path=NotificationNativeDownloadCompleted, Mode=TwoWay}"/>
						</Grid>

						<Grid HorizontalAlignment="Stretch" ToolTip.Tip="{x:Static lang:Resources.NotificationsView_TriggeredOnQbcDisconnect}">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition SharedSizeGroup="A" Width="auto" />
								<ColumnDefinition SharedSizeGroup="N" Width="auto" />
							</Grid.ColumnDefinitions>
							<DockPanel Grid.Column="0" Grid.ColumnSpan="2">
								<TextBlock Text="{x:Static lang:Resources.NotificationsView_ConnectionLost}"/>
								<ToggleSwitch IsEnabled="False" ToolTip.ShowOnDisabled="True" ToolTip.Tip="{x:Static lang:Resources.NotificationsView_InAppNotificationNotRequired}"/>
							</DockPanel>
							<ToggleSwitch Grid.Column="2" IsChecked=""/>
						</Grid>
					</StackPanel>
				</ScrollViewer>
			</Border>
		</StackPanel>

		
		<notification:NotificationMessageContainer Grid.Row="1" Manager="{Binding Manager}" />
	</Grid>
</UserControl>
