<UserControl xmlns="https://github.com/avaloniaui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d" d:DesignWidth="675" d:DesignHeight="800"
	xmlns:ic="using:FluentIcons.Avalonia"
	x:Class="qBittorrentCompanion.Views.LocalSettings.IconCustomizationView"
	xmlns:vmls="using:qBittorrentCompanion.ViewModels.LocalSettings"
	xmlns:vls="using:qBittorrentCompanion.Views.LocalSettings"
	x:DataType="vmls:IconCustomizationViewModel"
  xmlns:model="using:qBittorrentCompanion.Models"
	xmlns:converters="clr-namespace:qBittorrentCompanion.Converters"
	>
	<UserControl.Resources>
		<converters:LogoColorRecordToSvgLogoConverter x:Key="LogoColorRecordToSvgLogoConverter" />
		<!-- Slider values -->
		<vls:IconCustomizationPreview x:Key="DarkIconCustomizationPreview" IsInDarkMode="True"/>
		<vls:IconCustomizationPreview x:Key="LightIconCustomizationPreview" IsInDarkMode="False"/>
	</UserControl.Resources>
	<UserControl.Styles>
		<StyleInclude Source="/Styles/PreferencesStyles.axaml"/>
		<Style Selector="TextBlock, Label, ic|SymbolIcon">
			<Setter Property="TextElement.Foreground" Value="{DynamicResource SystemBaseHighColor}"/>
		</Style>
	</UserControl.Styles>
	<Grid RowDefinitions="auto *">
		<TransitioningContentControl Grid.Row="0" x:Name="PreviewSwitcher"/>

		<Grid Grid.Row="1" RowDefinitions="auto *">
			<Border Grid.Row="0" BorderBrush="{DynamicResource SystemChromeLowColor}" BorderThickness="0 1" Padding="4">
				<DockPanel HorizontalSpacing="8" Margin="8 0 0 0">
					<TextBlock Text="Presets available in:" Opacity="0.6"/>
					<ComboBox 
						ItemsSource="{Binding PresetCollections}" 
						SelectedIndex="{Binding SelectedPresetCollectionIndex}" 
						HorizontalAlignment="Left" 
						Theme="{StaticResource DataGridComboBox}"
						DisplayMemberBinding="{Binding Name}"
						x:Name="PresetComboBox"/>
				</DockPanel>
			</Border>
			<ListBox 
				Grid.Row="1" 
				ItemsSource="{Binding #PresetComboBox.SelectedItem.(vmls:LogoPresetCollectionRecord).LogoPresets}" 
				BorderThickness="0" 
				ScrollViewer.VerticalScrollBarVisibility="Auto"
				SelectedItem="{Binding SelectedLogoPresetRecord}">
				<ListBox.Styles>
					<Style Selector="ThemeVariantScope.Dark">
						<Setter Property="RequestedThemeVariant" Value="Dark"/>
					</Style>
					<Style Selector="ThemeVariantScope.Light">
						<Setter Property="RequestedThemeVariant" Value="Light"/>
					</Style>
					<Style Selector="Grid.ColorMeCheckered">
						<Setter Property="Background" Value="{DynamicResource ColorControlCheckeredBackgroundBrush}"/>
					</Style>
					<Style Selector="Border.ItemBorder">
						<Setter Property="Background" Value="{DynamicResource SystemRegionColor}"/>
					</Style>
				</ListBox.Styles>
				<ListBox.ItemsPanel>
					<ItemsPanelTemplate>
						<UniformGrid Columns="4"/>
					</ItemsPanelTemplate>
				</ListBox.ItemsPanel>
				<ListBox.ItemTemplate>
					<DataTemplate x:DataType="vmls:LogoPresetRecord">
						<ThemeVariantScope Classes.Dark="{Binding IsForDarkMode}" Classes.Light="{Binding !IsForDarkMode}">
							<Border Width="145" Height="145" Classes="ItemBorder">
								<Grid RowDefinitions="auto 128" Classes="ColorMeCheckered">
									<TextBlock TextAlignment="Center" Grid.Row="0" TextTrimming="CharacterEllipsis" Opacity="0.6"
										Text="{Binding Name}" ToolTip.Tip="{Binding Name}" HorizontalAlignment="Center" FontSize="12" Margin="0 0 0 1"/>
									<Svg Grid.Row="1" Source="{Binding Lcr, Converter={StaticResource LogoColorRecordToSvgLogoConverter}}" HorizontalAlignment="Center"/>
								</Grid>
							</Border>
						</ThemeVariantScope>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
			
		</Grid>
	</Grid>
</UserControl>
