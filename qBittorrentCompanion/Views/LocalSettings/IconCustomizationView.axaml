<UserControl xmlns="https://github.com/avaloniaui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d" d:DesignWidth="675" d:DesignHeight="800"
	xmlns:ic="using:FluentIcons.Avalonia"
	x:Class="qBittorrentCompanion.Views.LocalSettings.IconCustomizationView"
	xmlns:vmls="using:qBittorrentCompanion.ViewModels.LocalSettings"
	xmlns:vls="using:qBittorrentCompanion.Views.LocalSettings"
	x:DataType="vmls:IconCustomizationViewModel"
  xmlns:model="using:qBittorrentCompanion.Models"
	xmlns:converters="clr-namespace:qBittorrentCompanion.Converters"
	>
	<UserControl.Resources>
		<!-- Slider values -->
		<vls:IconCustomizationPreview x:Key="DarkIconCustomizationPreview" IsInDarkMode="True"/>
		<vls:IconCustomizationPreview x:Key="LightIconCustomizationPreview" IsInDarkMode="False"/>
	</UserControl.Resources>
	<UserControl.Styles>
		<StyleInclude Source="/Styles/PreferencesStyles.axaml"/>
		<Style Selector="TextBlock, Label, ic|SymbolIcon">
			<Setter Property="TextElement.Foreground" Value="{DynamicResource SystemBaseHighColor}"/>
		</Style>
	</UserControl.Styles>
	<Grid RowDefinitions="auto * auto">
		<TransitioningContentControl Grid.Row="0" x:Name="PreviewSwitcher"/>

		<Border Grid.Row="2">
			<StackPanel>
			<Border BorderBrush="{DynamicResource SystemChromeLowColor}" BorderThickness="0 1" Padding="4">
				<DockPanel HorizontalSpacing="8" Margin="8 0 0 0">
					<TextBlock Text="Presets available in:" Opacity="0.6"/>
					<ComboBox 
						ItemsSource="{Binding PresetCollections}" 
						SelectedIndex="{Binding SelectedPresetCollectionIndex}" 
						HorizontalAlignment="Left" 
						Theme="{StaticResource DataGridComboBox}"
						DisplayMemberBinding="{Binding Name}"
						x:Name="PresetComboBox"/>
				</DockPanel>
			</Border>
			<Border Padding="0">
				<Grid ColumnDefinitions="auto * auto">
					<Grid.ColumnDefinitions></Grid.ColumnDefinitions>
					<ic:SymbolIcon Grid.Column="0" Symbol="ChevronLeft" FontSize="30" VerticalAlignment="Center" Background="Orange"/>
					<ItemsControl  Grid.Column="1" ItemsSource="{Binding #PresetComboBox.SelectedItem.(vmls:LogoPresetCollection).LogoPresets}" Margin="0">
						<ItemsControl.Styles>
							<Style Selector="ThemeVariantScope.Dark">
								<Setter Property="RequestedThemeVariant" Value="Dark"/>
							</Style>
							<Style Selector="ThemeVariantScope.Light">
								<Setter Property="RequestedThemeVariant" Value="Light"/>
							</Style>
							<Style Selector="Grid.ColorMeCheckered">
								<Setter Property="Background" Value="{DynamicResource ColorControlCheckeredBackgroundBrush}"/>
							</Style>
							<Style Selector="Button.Stealth">
								<Setter Property="Background" Value="{DynamicResource SystemRegionColor}"/>
							</Style>
							<Style Selector="Button.Stealth:pointerover /template/ ContentPresenter">
								<Setter Property="Background" Value="{DynamicResource SystemChromeGrayColor}"/>
							</Style>
						</ItemsControl.Styles>
						<ItemsControl.ItemsPanel>
							<ItemsPanelTemplate>
								<UniformGrid Columns="4"/>
							</ItemsPanelTemplate>
						</ItemsControl.ItemsPanel>
						<ItemsControl.ItemTemplate>
							<DataTemplate x:DataType="vmls:LogoPreset">
								<ThemeVariantScope Classes.Dark="{Binding IsForDarkMode}" Classes.Light="{Binding !IsForDarkMode}">
									<Button Width="145" Margin="0" Classes="Stealth">
										<Button.Styles>
											<Style Selector="Button:pointerover">
												<Setter Property="Cursor" Value=""/>
											</Style>
										</Button.Styles>
										<Grid RowDefinitions="auto 128" Classes="ColorMeCheckered">
											<TextBlock TextAlignment="Center" Grid.Row="0" TextTrimming="CharacterEllipsis" Opacity="0.6"
												Text="{Binding Name}" ToolTip.Tip="{Binding Name}" HorizontalAlignment="Center" FontSize="12"/>
											<Svg Grid.Row="1" Source="{Binding Svg}" HorizontalAlignment="Center"/>
										</Grid>
									</Button>
								</ThemeVariantScope>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
					<ic:SymbolIcon Grid.Column="2" Symbol="ChevronRight" FontSize="30" VerticalAlignment="Center"/>
				</Grid>
			</Border>
			</StackPanel>
		</Border>
	</Grid>
</UserControl>
